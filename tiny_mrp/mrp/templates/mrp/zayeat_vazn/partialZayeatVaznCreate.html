<form method="post" action="{% url 'zayeatVazn_create'   %}" class="js-zayeatVazn-create-form">
  {% csrf_token %}
  <div class="modal-header " style="background:#ccc">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
    <h4 class="modal-title">جدید</h4>
  </div>
  <div class="modal-body">
   {% include 'mrp/zayeat_vazn/partialZayeatVaznForm.html' %}
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default" data-dismiss="modal">انصراف</button>

    <button type="submit" class="btn btn-primary" >ذخیره</button>

  </div>
</form>
<script>
  $(document).ready(function () {
    const $cells = $('.editable-cell');

    // Highlight content on focus
    $cells.on('focus', function () {
      const $this = $(this);
      const range = document.createRange();
      const selection = window.getSelection();
      range.selectNodeContents($this[0]);
      selection.removeAllRanges();
      selection.addRange(range);
    });

    // Enable Tab navigation
    $cells.on('keydown', function (e) {
      if (e.key === 'Tab') {
        e.preventDefault();
        const currentIndex = $cells.index(this);
        let nextIndex = e.shiftKey ? currentIndex - 1 : currentIndex + 1;

        // Handle circular navigation
        if (nextIndex < 0) nextIndex = $cells.length - 1;
        if (nextIndex >= $cells.length) nextIndex = 0;

        $cells.eq(nextIndex).focus();
      }
    });
  });
</script>