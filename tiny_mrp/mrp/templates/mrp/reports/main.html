<!--pip install django-widget-tweaks-->
{% extends 'mrp/blank-page.html' %}

{% load static %}
{% load widget_tweaks %}

{% block content %}

<div class="row">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-header">
        <h5 class="card-title mb-0">لیست گزارشات</h5>
      </div>
      <div class="card-body">
        <div class="row mb-3">
          <div class="col-sm-5 mb-2 mb-sm-0">
            <select class="form-control form-control-sm" id="reportCategory">
              <option value="-1">همه</option>
              {% for i in cat %}
              <option value="{{i.0}}">{{i.1}}</option>
              {% endfor %}
            </select>
          </div>
          <div class="col-sm-4 mb-2 mb-sm-0">
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio"  value="option1" name="btnradio" id="option1" >
              <label class="form-check-label" for="option1">مورد علاقه</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" id="option2" value="option2" name="btnradio">
              <label class="form-check-label" for="option2">همه</label>
            </div>
           
          </div>
          <div class="col-sm-3">
            <form class="d-flex mr-3">
             
              <div class="input-group">
                  <input type="text" class="form-control" placeholder="جستجو ایمیل" aria-describedby="woSearchBtn">
                  <div class="input-group-append">
                      <button class="btn btn-outline-light" type="button" id="woSearchBtn">
                          <i class="ti-search"></i>
                      </button>
                  </div>
              </div>
          </form>
          
          </div>
        </div>
        
        <div class="table-responsive">
          <table class="table table-striped table-hover" id="report-table">
            <thead>
              <tr>
                <th>نام</th>
                <th>شرح</th>
                <th></th>
                <th></th>
              </tr>
            </thead>
            <tbody id="tbody_report">
              {% include 'mrp/reports/partialReportList.html' %}
            </tbody>
          </table>
          
          <div class="woPaging">
            {% if reports.has_other_pages %}
            <nav aria-label="Page navigation">
              <ul class="pagination justify-content-center">
                {% if reports.has_previous %}
                <li class="page-item">
                  <a class="page-link" href="?page={{ reports.previous_page_number }}" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                  </a>
                </li>
                {% else %}
                <li class="page-item disabled">
                  <span class="page-link">&laquo;</span>
                </li>
                {% endif %}
                
                {% for i in reports.paginator.page_range %}
                {% if reports.number == i %}
                <li class="page-item active" aria-current="page">
                  <span class="page-link">{{ i }}</span>
                </li>
                {% else %}
                <li class="page-item">
                  <a class="page-link" href="?page={{ i }}">{{ i }}</a>
                </li>
                {% endif %}
                {% endfor %}
                
                {% if reports.has_next %}
                <li class="page-item">
                  <a class="page-link" href="?page={{ reports.next_page_number }}" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                  </a>
                </li>
                {% else %}
                <li class="page-item disabled">
                  <span class="page-link">&raquo;</span>
                </li>
                {% endif %}
              </ul>
            </nav>
            {% endif %}
          </div>
          
          <!-- BUTTON TO TRIGGER THE ACTION -->
          {% if request.user.username == "admin" %}
          <div class="mt-3">
            <button type="button" class="btn btn-primary js-create-report" data-url="{% url 'report_create' %}">
              <i class="bi bi-plus-circle"></i> جدید
            </button>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
    
    <div class="modal fade" id="modal-report">
      <div class="modal-dialog modal-lg">
        <div class="modal-content"></div>
      </div>
    </div>
    
    <div class="modal fade" id="modal-simplereport">
      <div class="modal-dialog">
        <div class="modal-content"></div>
      </div>
    </div>
    
    <div class="modal fade" id="modal-assetcategory">
      <div class="modal-dialog">
        <div class="modal-content"></div>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block javascript %}
<script src="{% static 'project/mainreport.js' %}"></script>
<!-- <script src="{% static '/js/project/reports/form.js' %}"></script> -->
{% endblock %}