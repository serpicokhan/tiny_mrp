{% extends 'mrp/blank-page.html' %}
{% load static %}

{% block stylesheet %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- Style -->
<link rel="stylesheet" href="{% static 'vendors/select2/css/select2.min.css' %}" type="text/css">
<style>
    /* Status badges */
    .status-badge {
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
    }
    .status-active {
        background-color: #d1e7dd;
        color: #198754;
    }
    .status-inactive {
        background-color: #f8d7da;
        color: #dc3545;
    }
    
    /* Table styling */
    .workcenters-table thead {
        background-color: #f8f9fa;
    }
    .workcenters-table tbody tr:hover {
        background-color: rgba(0,0,0,0.02);
    }
    
    /* Kanban card styling */
    .kanban-card {
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
        margin-bottom: 15px;
    }
    .kanban-card:hover {
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        transform: translateY(-2px);
    }
    .kanban-card-header {
        border-bottom: 1px solid #eee;
        padding: 12px 15px;
        background-color: #f8f9fa;
        border-radius: 8px 8px 0 0;
    }
    .kanban-card-body {
        padding: 15px;
    }
    .kanban-card-footer {
        border-top: 1px solid #eee;
        padding: 10px 15px;
        background-color: #f8f9fa;
        border-radius: 0 0 8px 8px;
    }
    
    /* Search and filter bar */
    .search-bar {
        background-color: #f8f9fa;
        border-radius: 5px;
        padding: 15px;
        margin-bottom: 20px;
    }
    
    /* Action buttons */
    .action-buttons .btn {
        margin-right: 5px;
    }
    
    /* View switcher */
    .view-switcher .btn {
        border-radius: 0;
    }
    .view-switcher .btn:first-child {
        border-radius: 4px 0 0 4px;
    }
    .view-switcher .btn:last-child {
        border-radius: 0 4px 4px 0;
    }
    .view-switcher .btn.active {
        background-color: #e9ecef;
    }
    
    /* Odoo-like control panel */
    .control-panel {
        background-color: #f8f9fa;
        padding: 10px 15px;
        border-radius: 5px;
        margin-bottom: 20px;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .kanban-card {
            width: 100%;
        }
    }
</style>
{% endblock %}
{% block content %}
        <!-- Page Header -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1><i class="fas fa-cogs mr-2"></i>مراکز کار</h1>
            <button class="btn btn-primary create-new-workcenter"  data-url="{% url 'create_workcenter' %}">
                <i class="fas fa-plus me-1"></i> مرکز کار جدید
            </button>
        </div>

        <!-- Control Panel (Odoo-style) -->
        <div class="control-panel">
            <div class="row align-items-center">
                <div class="col-md-4 mb-2 mb-md-0">
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-search"></i></span>
                        <input type="text" class="form-control" placeholder="جستجوی مراکز کار" id="workCenterSearch">
                    </div>
                </div>
                <div class="col-md-4 mb-2 mb-md-0">
                    <div class="btn-group w-100" id="filterButtons">
                        <button class="btn btn-sm btn-outline-secondary active" id="filterAll">همه</button>
                        <button class="btn btn-sm btn-outline-secondary" id="filterActive">فعال</button>
                        <button class="btn btn-sm btn-outline-secondary" id="filterInactive">غیر فعال</button>
                    </div>
                </div>
                <div class="col-md-4 text-md-end">
                    <div class="btn-group view-switcher">
                        <button class="btn btn-sm btn-outline-secondary active" id="tableViewBtn" data-view="table">
                            <i class="fas fa-list"></i> 
                        </button>
                        <button class="btn btn-sm btn-outline-secondary" id="kanbanViewBtn" data-view="kanban">
                            <i class="fas fa-th-large"></i> 
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Work Centers Table View (default) -->
        <div class="card" id="tableView">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover workcenters-table">
                        <thead>
                            <tr>
                                <th width="15%">کد</th>
                                <th width="25%">اسم</th>
                                <th width="15%">ظرفیت/ساعت</th>
                                <th width="15%">وضعیت</th>
                                <th width="20%">آخرین بروز رسانی</th>
                                <th width="10%">عملیات</th>
                            </tr>
                        </thead>
                        <tbody id="workCentersTableBody">
                            <!-- Work centers will be loaded here from JSON -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <nav class="mt-4">
                    <ul class="pagination justify-content-center">
                        <li class="page-item disabled">
                            <a class="page-link" href="#" tabindex="-1">Previous</a>
                        </li>
                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>

        <!-- Work Centers Kanban View (hidden by default) -->
        <div class="row" id="kanbanView" style="display: none;">
            <!-- Work centers will be loaded here from JSON -->
        </div>
    </div>

    <!-- New Work Center Modal -->
    <div class="modal fade" id="newWorkCenterModal" tabindex="-1" aria-labelledby="newWorkCenterModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
               
            </div>
        </div>
    </div>

    <!-- Edit Work Center Modal -->
    <div class="modal fade" id="editWorkCenterModal" tabindex="-1" aria-labelledby="editWorkCenterModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editWorkCenterModalLabel">Edit Work Center</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editWorkCenterForm">
                        <input type="hidden" id="editWorkCenterId">
                        <div class="mb-3">
                            <label for="editWorkCenterName" class="form-label">Name *</label>
                            <input type="text" class="form-control" id="editWorkCenterName" required>
                        </div>
                        <div class="mb-3">
                            <label for="editWorkCenterCode" class="form-label">Code *</label>
                            <input type="text" class="form-control" id="editWorkCenterCode" required>
                        </div>
                        <div class="mb-3">
                            <label for="editWorkCenterCapacity" class="form-label">Capacity per Hour *</label>
                            <input type="number" class="form-control" id="editWorkCenterCapacity" min="0" step="0.1" required>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="editWorkCenterActive">
                            <label class="form-check-label" for="editWorkCenterActive">Active</label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="updateWorkCenterBtn">Update Work Center</button>
                </div>
            </div>
        </div>
    </div>
{% endblock%}
{% block javascript %}
<!-- Javascript -->
<script src="{% static 'vendors/select2/js/select2.min.js' %}"></script>
<script src="{% static 'project/workcenter.js' %}"></script>



{% endblock %}
